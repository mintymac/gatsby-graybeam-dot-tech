# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is an Astro blog site for Gray Beam Technology. It uses Astro 5, Tailwind CSS with @tailwindcss/typography, and markdown content collections.

## Development Commands

### Essential Commands
- `npm run dev` - Start development server (http://localhost:4321)
- `npm run build` - Build production site to /dist directory
- `npm run preview` - Preview built site locally

## Architecture

### Content Management
Content is organized in Astro content collections under `/src/content`:
- **Blog**: `/src/content/blog/` - Blog posts as `.md` files with date in frontmatter
- **Pages**: `/src/content/pages/` - Static pages (about, privacy) with order field

### Content Collection Schemas (`src/content/config.ts`)
- **Blog**: title (string), category (string?), cover (string?), author (string?), date (date), draft (boolean)
- **Pages**: title (string), menuTitle (string?), order (number?)

### URL Routing
Posts and pages both live at root-level URLs (`/nature/`, `/about/`). The `[slug].astro` dynamic route handles both blog posts and pages via `getStaticPaths`.

### Styling System
- **Tailwind CSS** with class-based dark mode
- **@tailwindcss/typography** for prose styling of markdown content
- Brand colors defined in `tailwind.config.mjs` under `colors.brand`
- Theme tokens from `BRAND_IDENTITY.md` (pending brand exploration)

### Component Structure
All components in `/src/components/` are Astro components:
- `Header.astro` - Nav with page links, dark mode toggle
- `Footer.astro` - Copyright, contact, social links
- `BlogCard.astro` - Post listing item
- `CategoryBadge.astro` - Category pill with link
- `PostMeta.astro` - Date, author, category display
- `PrevNext.astro` - Post navigation
- `ThemeToggle.astro` - Dark/light mode toggle
- `Search.astro` - Pagefind search UI

### Layouts
- `BaseLayout.astro` - HTML shell, head, fonts, OG tags, header/footer
- `BlogPost.astro` - Post layout with prose styling, author bio, Giscus comments, prev/next
- `Page.astro` - Static page layout

### Site Data
- `src/data/site.ts` - Site metadata, author info, social links

### Features
- **Pagefind** - Client-side search, indexed at build time
- **Giscus** - GitHub Discussions-based comments (needs repo-id/category-id configuration)
- **RSS** - At `/rss.xml` via `@astrojs/rss`
- **Sitemap** - Auto-generated by `@astrojs/sitemap`
- **Dark mode** - Class-based with localStorage persistence
- **Syntax highlighting** - Shiki with one-dark-pro theme
- **Emoji** - Via remark-gemoji (`:100:` renders as emoji)

### Build & Deploy
- **Netlify** deployment configured in `netlify.toml`
- Build command: `npm run build`, publish dir: `dist`
- Static output mode

## Environment Variables

- `GOOGLE_API_KEY` or `VERTEX_API_KEY` - For brand exploration image generation (Phase 1)

## Key Patterns

### Adding New Blog Posts
Create `.md` file in `/src/content/blog/` with frontmatter:
```markdown
---
title: "Post Title"
category: "Category Name"
author: "Author Name"
date: 2026-01-01
---
```
Posts with images use directory format: `blog/post-name/index.md` with images alongside.

### Adding New Pages
Create `.md` file in `/src/content/pages/` with frontmatter:
```markdown
---
title: Page Title
menuTitle: Nav Label
order: 3
---
```
Pages with `order` field appear in the header navigation.

## Pending Work
- Brand exploration (Phase 1) - Run `/brand-explore`, `/logo-explore`, `/component-sheet`
- Giscus configuration - Enable GitHub Discussions, fill in repo-id and category-id
- BRAND_IDENTITY.md completion - Fill in remaining hex values after brand exploration
